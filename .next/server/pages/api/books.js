"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/books";
exports.ids = ["pages/api/books"];
exports.modules = {

/***/ "(api)/./src/lib/literal.js":
/*!****************************!*\
  !*** ./src/lib/literal.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getAccessToken\": () => (/* binding */ getAccessToken),\n/* harmony export */   \"getShelves\": () => (/* binding */ getShelves)\n/* harmony export */ });\nconst LITERAL_ENDPOINT = `https://literal.club/graphql/`;\nconst getAccessToken = async ()=>{\n    const response = await fetch(LITERAL_ENDPOINT, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            query: `\n            mutation login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                    token\n                }\n            }\n        `,\n            variables: {\n                email: process.env.LITERAL_USER_EMAIL,\n                password: process.env.LITERAL_USER_PASSWORD\n            }\n        })\n    }).then((res)=>res.json()\n    );\n    return response.data.login.token;\n};\nconst getShelves = async ()=>{\n    const access_token = await getAccessToken();\n    return fetch(LITERAL_ENDPOINT, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${access_token}`,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            query: `\n          query myReadingStates {\n            myReadingStates {\n              ...ReadingStateParts # find fragments below\n              book {\n                ...BookParts # find fragments below\n              }\n            }\n          }\n\n          fragment ReadingStateParts on ReadingState {\n            id\n            status\n            bookId\n            profileId\n            createdAt\n          }\n\n          fragment BookParts on Book {\n            id\n            slug\n            title\n            subtitle\n            description\n            cover\n            authors {\n              id\n              name\n            }\n          }\n            `\n        })\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2xpdGVyYWwuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxLQUFLLENBQUNBLGdCQUFnQixJQUFJLDZCQUE2QjtBQUU5QyxLQUFLLENBQUNDLGNBQWMsYUFBZSxDQUFDO0lBQ3pDLEtBQUssQ0FBQ0MsUUFBUSxHQUFHLEtBQUssQ0FBQ0MsS0FBSyxDQUFDSCxnQkFBZ0IsRUFBRSxDQUFDO1FBQzlDSSxNQUFNLEVBQUUsQ0FBTTtRQUNkQyxPQUFPLEVBQUUsQ0FBQztZQUNSLENBQWMsZUFBRSxDQUFrQjtRQUNwQyxDQUFDO1FBQ0RDLElBQUksRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztZQUNwQkMsS0FBSyxHQUFHOzs7Ozs7UUFNUjtZQUNBQyxTQUFTLEVBQUUsQ0FBQztnQkFDVkMsS0FBSyxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0Msa0JBQWtCO2dCQUNyQ0MsUUFBUSxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0cscUJBQXFCO1lBQzdDLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEdBQUcsR0FBS0EsR0FBRyxDQUFDQyxJQUFJOztJQUN6QixNQUFNLENBQUNqQixRQUFRLENBQUNrQixJQUFJLENBQUNDLEtBQUssQ0FBQ0MsS0FBSztBQUNsQyxDQUFDO0FBRUksS0FBSyxDQUFDQyxVQUFVLGFBQWUsQ0FBQztJQUNuQyxLQUFLLENBQUNDLFlBQVksR0FBSSxLQUFLLENBQUN2QixjQUFjO0lBRTFDLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDSCxnQkFBZ0IsRUFBRSxDQUFDO1FBQzlCSSxNQUFNLEVBQUUsQ0FBTTtRQUNkQyxPQUFPLEVBQUUsQ0FBQztZQUNSb0IsYUFBYSxHQUFHLE9BQU8sRUFBRUQsWUFBWTtZQUNyQyxDQUFjLGVBQUUsQ0FBa0I7UUFDcEMsQ0FBQztRQUNEbEIsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDO1lBQ3BCQyxLQUFLLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztZQThCSjtRQUNOLENBQUM7SUFDSCxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NyeXdvbGYubWUvLi9zcmMvbGliL2xpdGVyYWwuanM/OTNhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IExJVEVSQUxfRU5EUE9JTlQgPSBgaHR0cHM6Ly9saXRlcmFsLmNsdWIvZ3JhcGhxbC9gO1xuXG4gIGV4cG9ydCBjb25zdCBnZXRBY2Nlc3NUb2tlbiA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKExJVEVSQUxfRU5EUE9JTlQsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcXVlcnk6IGBcbiAgICAgICAgICAgIG11dGF0aW9uIGxvZ2luKCRlbWFpbDogU3RyaW5nISwgJHBhc3N3b3JkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgbG9naW4oZW1haWw6ICRlbWFpbCwgcGFzc3dvcmQ6ICRwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICB0b2tlblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYCxcbiAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgZW1haWw6IHByb2Nlc3MuZW52LkxJVEVSQUxfVVNFUl9FTUFJTCxcbiAgICAgICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuTElURVJBTF9VU0VSX1BBU1NXT1JELFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiByZXMuanNvbigpKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5sb2dpbi50b2tlbjtcbiAgfTtcblxuZXhwb3J0IGNvbnN0IGdldFNoZWx2ZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgYWNjZXNzX3Rva2VuICA9IGF3YWl0IGdldEFjY2Vzc1Rva2VuKCk7XG5cbiAgICByZXR1cm4gZmV0Y2goTElURVJBTF9FTkRQT0lOVCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc190b2tlbn1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHF1ZXJ5OiBgXG4gICAgICAgICAgcXVlcnkgbXlSZWFkaW5nU3RhdGVzIHtcbiAgICAgICAgICAgIG15UmVhZGluZ1N0YXRlcyB7XG4gICAgICAgICAgICAgIC4uLlJlYWRpbmdTdGF0ZVBhcnRzICMgZmluZCBmcmFnbWVudHMgYmVsb3dcbiAgICAgICAgICAgICAgYm9vayB7XG4gICAgICAgICAgICAgICAgLi4uQm9va1BhcnRzICMgZmluZCBmcmFnbWVudHMgYmVsb3dcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZyYWdtZW50IFJlYWRpbmdTdGF0ZVBhcnRzIG9uIFJlYWRpbmdTdGF0ZSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgc3RhdHVzXG4gICAgICAgICAgICBib29rSWRcbiAgICAgICAgICAgIHByb2ZpbGVJZFxuICAgICAgICAgICAgY3JlYXRlZEF0XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnJhZ21lbnQgQm9va1BhcnRzIG9uIEJvb2sge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIHNsdWdcbiAgICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgICBzdWJ0aXRsZVxuICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIGNvdmVyXG4gICAgICAgICAgICBhdXRob3JzIHtcbiAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAgIGAsXG4gICAgICB9KSxcbiAgICB9KTtcbn07XG5cbiJdLCJuYW1lcyI6WyJMSVRFUkFMX0VORFBPSU5UIiwiZ2V0QWNjZXNzVG9rZW4iLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicXVlcnkiLCJ2YXJpYWJsZXMiLCJlbWFpbCIsInByb2Nlc3MiLCJlbnYiLCJMSVRFUkFMX1VTRVJfRU1BSUwiLCJwYXNzd29yZCIsIkxJVEVSQUxfVVNFUl9QQVNTV09SRCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZGF0YSIsImxvZ2luIiwidG9rZW4iLCJnZXRTaGVsdmVzIiwiYWNjZXNzX3Rva2VuIiwiQXV0aG9yaXphdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/literal.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/books.js":
/*!********************************!*\
  !*** ./src/pages/api/books.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/literal */ \"(api)/./src/lib/literal.js\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (_, res)=>{\n    const response = await (0,_lib_literal__WEBPACK_IMPORTED_MODULE_0__.getShelves)();\n    const shelves = await response.json();\n    const currentlyReading = shelves.data.myReadingStates.filter((shelf)=>shelf.status === \"IS_READING\"\n    );\n    const latestBooks = currentlyReading.map((book)=>{\n        return {\n            slug: book.book.slug,\n            title: book.book.title,\n            author: book.book.authors[0].name\n        };\n    });\n    const latestBook = latestBooks[latestBooks.length - 1];\n    const title = latestBook.title;\n    const author = latestBook.author;\n    const slug = latestBook.slug;\n    res.setHeader(\"Cache-Control\", \"public, s-maxage=60, stale-while-revalidate=30\");\n    return res.status(200).json({\n        title,\n        author,\n        slug\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2Jvb2tzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBDO0FBRTFDLGlFQUFNLE9BQWdCQyxDQUFDLEVBQUVDLEdBQUcsR0FBSyxDQUFDO0lBRWhDLEtBQUssQ0FBQ0MsUUFBUSxHQUFHLEtBQUssQ0FBQ0gsd0RBQVU7SUFDakMsS0FBSyxDQUFDSSxPQUFPLEdBQUcsS0FBSyxDQUFDRCxRQUFRLENBQUNFLElBQUk7SUFFbkMsS0FBSyxDQUFDQyxnQkFBZ0IsR0FBR0YsT0FBTyxDQUFDRyxJQUFJLENBQUNDLGVBQWUsQ0FBQ0MsTUFBTSxFQUFDQyxLQUFLLEdBQUlBLEtBQUssQ0FBQ0MsTUFBTSxLQUFLLENBQVk7O0lBQ25HLEtBQUssQ0FBQ0MsV0FBVyxHQUFHTixnQkFBZ0IsQ0FBQ08sR0FBRyxFQUFFQyxJQUFJLEdBQUssQ0FBQztRQUNsRCxNQUFNLENBQUMsQ0FBQztZQUNOQyxJQUFJLEVBQUVELElBQUksQ0FBQ0EsSUFBSSxDQUFDQyxJQUFJO1lBQ3BCQyxLQUFLLEVBQUVGLElBQUksQ0FBQ0EsSUFBSSxDQUFDRSxLQUFLO1lBQ3RCQyxNQUFNLEVBQUVILElBQUksQ0FBQ0EsSUFBSSxDQUFDSSxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJO1FBQ25DLENBQUM7SUFDSCxDQUFDO0lBRUQsS0FBSyxDQUFDQyxVQUFVLEdBQUdSLFdBQVcsQ0FBQ0EsV0FBVyxDQUFDUyxNQUFNLEdBQUcsQ0FBQztJQUVyRCxLQUFLLENBQUNMLEtBQUssR0FBR0ksVUFBVSxDQUFDSixLQUFLO0lBQzlCLEtBQUssQ0FBQ0MsTUFBTSxHQUFHRyxVQUFVLENBQUNILE1BQU07SUFDaEMsS0FBSyxDQUFDRixJQUFJLEdBQUdLLFVBQVUsQ0FBQ0wsSUFBSTtJQUU1QmIsR0FBRyxDQUFDb0IsU0FBUyxDQUNYLENBQWUsZ0JBQ2YsQ0FBZ0Q7SUFHbEQsTUFBTSxDQUFDcEIsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxFQUFFTixJQUFJLENBQUMsQ0FBQztRQUFDVyxLQUFLO1FBQUVDLE1BQU07UUFBRUYsSUFBSTtJQUFDLENBQUM7QUFDckQsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NyeXdvbGYubWUvLi9zcmMvcGFnZXMvYXBpL2Jvb2tzLmpzPzBmOWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U2hlbHZlcyB9IGZyb20gXCJAL2xpYi9saXRlcmFsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChfLCByZXMpID0+IHtcbiAgXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0U2hlbHZlcygpO1xuICBjb25zdCBzaGVsdmVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICBcbiAgY29uc3QgY3VycmVudGx5UmVhZGluZyA9IHNoZWx2ZXMuZGF0YS5teVJlYWRpbmdTdGF0ZXMuZmlsdGVyKHNoZWxmID0+IHNoZWxmLnN0YXR1cyA9PT0gXCJJU19SRUFESU5HXCIpO1xuICBjb25zdCBsYXRlc3RCb29rcyA9IGN1cnJlbnRseVJlYWRpbmcubWFwKChib29rKSA9PiB7XG4gICAgcmV0dXJuIHsgICAgICAgXG4gICAgICBzbHVnOiBib29rLmJvb2suc2x1ZyxcbiAgICAgIHRpdGxlOiBib29rLmJvb2sudGl0bGUsIFxuICAgICAgYXV0aG9yOiBib29rLmJvb2suYXV0aG9yc1swXS5uYW1lXG4gICAgfTtcbiAgfSk7XG5cbiAgY29uc3QgbGF0ZXN0Qm9vayA9IGxhdGVzdEJvb2tzW2xhdGVzdEJvb2tzLmxlbmd0aCAtIDFdO1xuXG4gIGNvbnN0IHRpdGxlID0gbGF0ZXN0Qm9vay50aXRsZTtcbiAgY29uc3QgYXV0aG9yID0gbGF0ZXN0Qm9vay5hdXRob3I7XG4gIGNvbnN0IHNsdWcgPSBsYXRlc3RCb29rLnNsdWc7XG4gIFxuICByZXMuc2V0SGVhZGVyKFxuICAgIFwiQ2FjaGUtQ29udHJvbFwiLFxuICAgIFwicHVibGljLCBzLW1heGFnZT02MCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT0zMFwiXG4gICk7XG5cbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdGl0bGUsIGF1dGhvciwgc2x1ZyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRTaGVsdmVzIiwiXyIsInJlcyIsInJlc3BvbnNlIiwic2hlbHZlcyIsImpzb24iLCJjdXJyZW50bHlSZWFkaW5nIiwiZGF0YSIsIm15UmVhZGluZ1N0YXRlcyIsImZpbHRlciIsInNoZWxmIiwic3RhdHVzIiwibGF0ZXN0Qm9va3MiLCJtYXAiLCJib29rIiwic2x1ZyIsInRpdGxlIiwiYXV0aG9yIiwiYXV0aG9ycyIsIm5hbWUiLCJsYXRlc3RCb29rIiwibGVuZ3RoIiwic2V0SGVhZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/books.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/books.js"));
module.exports = __webpack_exports__;

})();