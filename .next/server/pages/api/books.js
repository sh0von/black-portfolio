"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/books";
exports.ids = ["pages/api/books"];
exports.modules = {

/***/ "(api)/./src/lib/literal.js":
/*!****************************!*\
  !*** ./src/lib/literal.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getAccessToken\": () => (/* binding */ getAccessToken),\n/* harmony export */   \"getShelves\": () => (/* binding */ getShelves)\n/* harmony export */ });\nconst LITERAL_ENDPOINT = `https://literal.club/graphql/`;\nconst getAccessToken = async ()=>{\n    const response = await fetch(LITERAL_ENDPOINT, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            query: `\n            mutation login($email: String!, $password: String!) {\n                login(email: $email, password: $password) {\n                    token\n                }\n            }\n        `,\n            variables: {\n                email: process.env.LITERAL_USER_EMAIL,\n                password: process.env.LITERAL_USER_PASSWORD\n            }\n        })\n    }).then((res)=>res.json()\n    );\n    return response.data.login.token;\n};\nconst getShelves = async ()=>{\n    const access_token = await getAccessToken();\n    return fetch(LITERAL_ENDPOINT, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${access_token}`,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            query: `\n          query myReadingStates {\n            myReadingStates {\n              ...ReadingStateParts # find fragments below\n              book {\n                ...BookParts # find fragments below\n              }\n            }\n          }\n\n          fragment ReadingStateParts on ReadingState {\n            id\n            status\n            bookId\n            profileId\n            createdAt\n          }\n\n          fragment BookParts on Book {\n            id\n            slug\n            title\n            subtitle\n            description\n            cover\n            authors {\n              id\n              name\n            }\n          }\n            `\n        })\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2xpdGVyYWwuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxLQUFLLENBQUNBLGdCQUFnQixJQUFJLDZCQUE2QjtBQUU5QyxLQUFLLENBQUNDLGNBQWMsYUFBZSxDQUFDO0lBQ3pDLEtBQUssQ0FBQ0MsUUFBUSxHQUFHLEtBQUssQ0FBQ0MsS0FBSyxDQUFDSCxnQkFBZ0IsRUFBRSxDQUFDO1FBQzlDSSxNQUFNLEVBQUUsQ0FBTTtRQUNkQyxPQUFPLEVBQUUsQ0FBQztZQUNSLENBQWMsZUFBRSxDQUFrQjtRQUNwQyxDQUFDO1FBQ0RDLElBQUksRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztZQUNwQkMsS0FBSyxHQUFHOzs7Ozs7UUFNUjtZQUNBQyxTQUFTLEVBQUUsQ0FBQztnQkFDVkMsS0FBSyxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0Msa0JBQWtCO2dCQUNyQ0MsUUFBUSxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0cscUJBQXFCO1lBQzdDLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEdBQUcsR0FBS0EsR0FBRyxDQUFDQyxJQUFJOztJQUN6QixNQUFNLENBQUNqQixRQUFRLENBQUNrQixJQUFJLENBQUNDLEtBQUssQ0FBQ0MsS0FBSztBQUNsQyxDQUFDO0FBRUksS0FBSyxDQUFDQyxVQUFVLGFBQWUsQ0FBQztJQUNuQyxLQUFLLENBQUNDLFlBQVksR0FBSSxLQUFLLENBQUN2QixjQUFjO0lBRTFDLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDSCxnQkFBZ0IsRUFBRSxDQUFDO1FBQzlCSSxNQUFNLEVBQUUsQ0FBTTtRQUNkQyxPQUFPLEVBQUUsQ0FBQztZQUNSb0IsYUFBYSxHQUFHLE9BQU8sRUFBRUQsWUFBWTtZQUNyQyxDQUFjLGVBQUUsQ0FBa0I7UUFDcEMsQ0FBQztRQUNEbEIsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDO1lBQ3BCQyxLQUFLLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztZQThCSjtRQUNOLENBQUM7SUFDSCxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21pdHVsLmNhLy4vc3JjL2xpYi9saXRlcmFsLmpzPzkzYTkiXSwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBMSVRFUkFMX0VORFBPSU5UID0gYGh0dHBzOi8vbGl0ZXJhbC5jbHViL2dyYXBocWwvYDtcblxuICBleHBvcnQgY29uc3QgZ2V0QWNjZXNzVG9rZW4gPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChMSVRFUkFMX0VORFBPSU5ULCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHF1ZXJ5OiBgXG4gICAgICAgICAgICBtdXRhdGlvbiBsb2dpbigkZW1haWw6IFN0cmluZyEsICRwYXNzd29yZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgIGxvZ2luKGVtYWlsOiAkZW1haWwsIHBhc3N3b3JkOiAkcGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGAsXG4gICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgIGVtYWlsOiBwcm9jZXNzLmVudi5MSVRFUkFMX1VTRVJfRU1BSUwsXG4gICAgICAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkxJVEVSQUxfVVNFUl9QQVNTV09SRCxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEubG9naW4udG9rZW47XG4gIH07XG5cbmV4cG9ydCBjb25zdCBnZXRTaGVsdmVzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGFjY2Vzc190b2tlbiAgPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbigpO1xuXG4gICAgcmV0dXJuIGZldGNoKExJVEVSQUxfRU5EUE9JTlQsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NfdG9rZW59YCxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBxdWVyeTogYFxuICAgICAgICAgIHF1ZXJ5IG15UmVhZGluZ1N0YXRlcyB7XG4gICAgICAgICAgICBteVJlYWRpbmdTdGF0ZXMge1xuICAgICAgICAgICAgICAuLi5SZWFkaW5nU3RhdGVQYXJ0cyAjIGZpbmQgZnJhZ21lbnRzIGJlbG93XG4gICAgICAgICAgICAgIGJvb2sge1xuICAgICAgICAgICAgICAgIC4uLkJvb2tQYXJ0cyAjIGZpbmQgZnJhZ21lbnRzIGJlbG93XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmcmFnbWVudCBSZWFkaW5nU3RhdGVQYXJ0cyBvbiBSZWFkaW5nU3RhdGUge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIHN0YXR1c1xuICAgICAgICAgICAgYm9va0lkXG4gICAgICAgICAgICBwcm9maWxlSWRcbiAgICAgICAgICAgIGNyZWF0ZWRBdFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZyYWdtZW50IEJvb2tQYXJ0cyBvbiBCb29rIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBzbHVnXG4gICAgICAgICAgICB0aXRsZVxuICAgICAgICAgICAgc3VidGl0bGVcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBjb3ZlclxuICAgICAgICAgICAgYXV0aG9ycyB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgICBgLFxuICAgICAgfSksXG4gICAgfSk7XG59O1xuXG4iXSwibmFtZXMiOlsiTElURVJBTF9FTkRQT0lOVCIsImdldEFjY2Vzc1Rva2VuIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInF1ZXJ5IiwidmFyaWFibGVzIiwiZW1haWwiLCJwcm9jZXNzIiwiZW52IiwiTElURVJBTF9VU0VSX0VNQUlMIiwicGFzc3dvcmQiLCJMSVRFUkFMX1VTRVJfUEFTU1dPUkQiLCJ0aGVuIiwicmVzIiwianNvbiIsImRhdGEiLCJsb2dpbiIsInRva2VuIiwiZ2V0U2hlbHZlcyIsImFjY2Vzc190b2tlbiIsIkF1dGhvcml6YXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/literal.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/books.js":
/*!********************************!*\
  !*** ./src/pages/api/books.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/literal */ \"(api)/./src/lib/literal.js\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (_, res)=>{\n    const response = await (0,_lib_literal__WEBPACK_IMPORTED_MODULE_0__.getShelves)();\n    const shelves = await response.json();\n    const currentlyReading = shelves.data.myReadingStates.filter((shelf)=>shelf.status === \"IS_READING\"\n    );\n    const latestBooks = currentlyReading.map((book)=>{\n        return {\n            slug: book.book.slug,\n            title: book.book.title,\n            author: book.book.authors[0].name\n        };\n    });\n    const latestBook = latestBooks[latestBooks.length - 1];\n    const title = latestBook.title;\n    const author = latestBook.author;\n    const slug = latestBook.slug;\n    res.setHeader(\"Cache-Control\", \"public, s-maxage=60, stale-while-revalidate=30\");\n    return res.status(200).json({\n        title,\n        author,\n        slug\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2Jvb2tzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBDO0FBRTFDLGlFQUFNLE9BQWdCQyxDQUFDLEVBQUVDLEdBQUcsR0FBSyxDQUFDO0lBRWhDLEtBQUssQ0FBQ0MsUUFBUSxHQUFHLEtBQUssQ0FBQ0gsd0RBQVU7SUFDakMsS0FBSyxDQUFDSSxPQUFPLEdBQUcsS0FBSyxDQUFDRCxRQUFRLENBQUNFLElBQUk7SUFFbkMsS0FBSyxDQUFDQyxnQkFBZ0IsR0FBR0YsT0FBTyxDQUFDRyxJQUFJLENBQUNDLGVBQWUsQ0FBQ0MsTUFBTSxFQUFDQyxLQUFLLEdBQUlBLEtBQUssQ0FBQ0MsTUFBTSxLQUFLLENBQVk7O0lBQ25HLEtBQUssQ0FBQ0MsV0FBVyxHQUFHTixnQkFBZ0IsQ0FBQ08sR0FBRyxFQUFFQyxJQUFJLEdBQUssQ0FBQztRQUNsRCxNQUFNLENBQUMsQ0FBQztZQUNOQyxJQUFJLEVBQUVELElBQUksQ0FBQ0EsSUFBSSxDQUFDQyxJQUFJO1lBQ3BCQyxLQUFLLEVBQUVGLElBQUksQ0FBQ0EsSUFBSSxDQUFDRSxLQUFLO1lBQ3RCQyxNQUFNLEVBQUVILElBQUksQ0FBQ0EsSUFBSSxDQUFDSSxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJO1FBQ25DLENBQUM7SUFDSCxDQUFDO0lBRUQsS0FBSyxDQUFDQyxVQUFVLEdBQUdSLFdBQVcsQ0FBQ0EsV0FBVyxDQUFDUyxNQUFNLEdBQUcsQ0FBQztJQUVyRCxLQUFLLENBQUNMLEtBQUssR0FBR0ksVUFBVSxDQUFDSixLQUFLO0lBQzlCLEtBQUssQ0FBQ0MsTUFBTSxHQUFHRyxVQUFVLENBQUNILE1BQU07SUFDaEMsS0FBSyxDQUFDRixJQUFJLEdBQUdLLFVBQVUsQ0FBQ0wsSUFBSTtJQUU1QmIsR0FBRyxDQUFDb0IsU0FBUyxDQUNYLENBQWUsZ0JBQ2YsQ0FBZ0Q7SUFHbEQsTUFBTSxDQUFDcEIsR0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxFQUFFTixJQUFJLENBQUMsQ0FBQztRQUFDVyxLQUFLO1FBQUVDLE1BQU07UUFBRUYsSUFBSTtJQUFDLENBQUM7QUFDckQsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21pdHVsLmNhLy4vc3JjL3BhZ2VzL2FwaS9ib29rcy5qcz8wZjlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFNoZWx2ZXMgfSBmcm9tIFwiQC9saWIvbGl0ZXJhbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoXywgcmVzKSA9PiB7XG4gIFxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFNoZWx2ZXMoKTtcbiAgY29uc3Qgc2hlbHZlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgXG4gIGNvbnN0IGN1cnJlbnRseVJlYWRpbmcgPSBzaGVsdmVzLmRhdGEubXlSZWFkaW5nU3RhdGVzLmZpbHRlcihzaGVsZiA9PiBzaGVsZi5zdGF0dXMgPT09IFwiSVNfUkVBRElOR1wiKTtcbiAgY29uc3QgbGF0ZXN0Qm9va3MgPSBjdXJyZW50bHlSZWFkaW5nLm1hcCgoYm9vaykgPT4ge1xuICAgIHJldHVybiB7ICAgICAgIFxuICAgICAgc2x1ZzogYm9vay5ib29rLnNsdWcsXG4gICAgICB0aXRsZTogYm9vay5ib29rLnRpdGxlLCBcbiAgICAgIGF1dGhvcjogYm9vay5ib29rLmF1dGhvcnNbMF0ubmFtZVxuICAgIH07XG4gIH0pO1xuXG4gIGNvbnN0IGxhdGVzdEJvb2sgPSBsYXRlc3RCb29rc1tsYXRlc3RCb29rcy5sZW5ndGggLSAxXTtcblxuICBjb25zdCB0aXRsZSA9IGxhdGVzdEJvb2sudGl0bGU7XG4gIGNvbnN0IGF1dGhvciA9IGxhdGVzdEJvb2suYXV0aG9yO1xuICBjb25zdCBzbHVnID0gbGF0ZXN0Qm9vay5zbHVnO1xuICBcbiAgcmVzLnNldEhlYWRlcihcbiAgICBcIkNhY2hlLUNvbnRyb2xcIixcbiAgICBcInB1YmxpYywgcy1tYXhhZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9MzBcIlxuICApO1xuXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRpdGxlLCBhdXRob3IsIHNsdWcgfSk7XG59XG4iXSwibmFtZXMiOlsiZ2V0U2hlbHZlcyIsIl8iLCJyZXMiLCJyZXNwb25zZSIsInNoZWx2ZXMiLCJqc29uIiwiY3VycmVudGx5UmVhZGluZyIsImRhdGEiLCJteVJlYWRpbmdTdGF0ZXMiLCJmaWx0ZXIiLCJzaGVsZiIsInN0YXR1cyIsImxhdGVzdEJvb2tzIiwibWFwIiwiYm9vayIsInNsdWciLCJ0aXRsZSIsImF1dGhvciIsImF1dGhvcnMiLCJuYW1lIiwibGF0ZXN0Qm9vayIsImxlbmd0aCIsInNldEhlYWRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/books.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/books.js"));
module.exports = __webpack_exports__;

})();