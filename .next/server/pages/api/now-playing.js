"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/now-playing";
exports.ids = ["pages/api/now-playing"];
exports.modules = {

/***/ "(api)/./src/lib/spotify.js":
/*!****************************!*\
  !*** ./src/lib/spotify.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getNowPlaying\": () => (/* binding */ getNowPlaying),\n/* harmony export */   \"getTopTracks\": () => (/* binding */ getTopTracks),\n/* harmony export */   \"getRecentTracks\": () => (/* binding */ getRecentTracks)\n/* harmony export */ });\nconst client_id = process.env.SPOTIFY_CLIENT_ID;\nconst client_secret = process.env.SPOTIFY_CLIENT_SECRET;\nconst refresh_token = process.env.SPOTIFY_REFRESH_TOKEN;\nconst basic = Buffer.from(`${client_id}:${client_secret}`).toString(\"base64\");\nconst TOKEN_ENDPOINT = `https://accounts.spotify.com/api/token`;\nconst getAccessToken = async ()=>{\n    const response = await fetch(TOKEN_ENDPOINT, {\n        method: \"POST\",\n        headers: {\n            Authorization: `Basic ${basic}`,\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: new URLSearchParams({\n            grant_type: \"refresh_token\",\n            refresh_token\n        }).toString()\n    });\n    return response.json();\n};\nconst NOW_PLAYING_ENDPOINT = `https://api.spotify.com/v1/me/player/currently-playing`;\nconst getNowPlaying = async ()=>{\n    const { access_token  } = await getAccessToken();\n    return fetch(NOW_PLAYING_ENDPOINT, {\n        headers: {\n            Authorization: `Bearer ${access_token}`\n        }\n    });\n};\nconst TOP_TRACKS_ENDPOINT = `https://api.spotify.com/v1/me/top/tracks`;\nconst getTopTracks = async ()=>{\n    const { access_token  } = await getAccessToken();\n    return fetch(TOP_TRACKS_ENDPOINT, {\n        headers: {\n            Authorization: `Bearer ${access_token}`\n        }\n    });\n};\nconst RECENTLY_PLAYED_ENDPOINT = `https://api.spotify.com/v1/me/player/recently-played`;\nconst getRecentTracks = async ()=>{\n    const { access_token  } = await getAccessToken();\n    return fetch(RECENTLY_PLAYED_ENDPOINT, {\n        headers: {\n            Authorization: `Bearer ${access_token}`\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3Nwb3RpZnkuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsS0FBSyxDQUFDQSxTQUFTLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxpQkFBaUI7QUFDL0MsS0FBSyxDQUFDQyxhQUFhLEdBQUdILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxxQkFBcUI7QUFDdkQsS0FBSyxDQUFDQyxhQUFhLEdBQUdMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSyxxQkFBcUI7QUFFdkQsS0FBSyxDQUFDQyxLQUFLLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBSSxJQUFJVixTQUFTLENBQUMsQ0FBQyxFQUFFSSxhQUFhLElBQUlPLFFBQVEsQ0FBQyxDQUFRO0FBQzVFLEtBQUssQ0FBQ0MsY0FBYyxJQUFJLHNDQUFzQztBQUU5RCxLQUFLLENBQUNDLGNBQWMsYUFBZSxDQUFDO0lBQ2xDLEtBQUssQ0FBQ0MsUUFBUSxHQUFHLEtBQUssQ0FBQ0MsS0FBSyxDQUFDSCxjQUFjLEVBQUUsQ0FBQztRQUM1Q0ksTUFBTSxFQUFFLENBQU07UUFDZEMsT0FBTyxFQUFFLENBQUM7WUFDUkMsYUFBYSxHQUFHLE1BQU0sRUFBRVYsS0FBSztZQUM3QixDQUFjLGVBQUUsQ0FBbUM7UUFDckQsQ0FBQztRQUNEVyxJQUFJLEVBQUUsR0FBRyxDQUFDQyxlQUFlLENBQUMsQ0FBQztZQUN6QkMsVUFBVSxFQUFFLENBQWU7WUFDM0JmLGFBQWE7UUFDZixDQUFDLEVBQUVLLFFBQVE7SUFDYixDQUFDO0lBRUQsTUFBTSxDQUFDRyxRQUFRLENBQUNRLElBQUk7QUFDdEIsQ0FBQztBQUVELEtBQUssQ0FBQ0Msb0JBQW9CLElBQUksc0RBQXNEO0FBRTdFLEtBQUssQ0FBQ0MsYUFBYSxhQUFlLENBQUM7SUFDeEMsS0FBSyxDQUFDLENBQUMsQ0FBQ0MsWUFBWSxFQUFDLENBQUMsR0FBRyxLQUFLLENBQUNaLGNBQWM7SUFFN0MsTUFBTSxDQUFDRSxLQUFLLENBQUNRLG9CQUFvQixFQUFFLENBQUM7UUFDbENOLE9BQU8sRUFBRSxDQUFDO1lBQ1JDLGFBQWEsR0FBRyxPQUFPLEVBQUVPLFlBQVk7UUFDdkMsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDO0FBRUQsS0FBSyxDQUFDQyxtQkFBbUIsSUFBSSx3Q0FBd0M7QUFFOUQsS0FBSyxDQUFDQyxZQUFZLGFBQWUsQ0FBQztJQUN2QyxLQUFLLENBQUMsQ0FBQyxDQUFDRixZQUFZLEVBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQ1osY0FBYztJQUU3QyxNQUFNLENBQUNFLEtBQUssQ0FBQ1csbUJBQW1CLEVBQUUsQ0FBQztRQUNqQ1QsT0FBTyxFQUFFLENBQUM7WUFDUkMsYUFBYSxHQUFHLE9BQU8sRUFBRU8sWUFBWTtRQUN2QyxDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFFRCxLQUFLLENBQUNHLHdCQUF3QixJQUFJLG9EQUFvRDtBQUUvRSxLQUFLLENBQUNDLGVBQWUsYUFBZSxDQUFDO0lBQzFDLEtBQUssQ0FBQyxDQUFDLENBQUNKLFlBQVksRUFBQyxDQUFDLEdBQUcsS0FBSyxDQUFDWixjQUFjO0lBRTdDLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDYSx3QkFBd0IsRUFBRSxDQUFDO1FBQ3RDWCxPQUFPLEVBQUUsQ0FBQztZQUNSQyxhQUFhLEdBQUcsT0FBTyxFQUFFTyxZQUFZO1FBQ3ZDLENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21pdHVsLmNhLy4vc3JjL2xpYi9zcG90aWZ5LmpzPzlhYWQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBjbGllbnRfaWQgPSBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9JRDtcbmNvbnN0IGNsaWVudF9zZWNyZXQgPSBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9TRUNSRVQ7XG5jb25zdCByZWZyZXNoX3Rva2VuID0gcHJvY2Vzcy5lbnYuU1BPVElGWV9SRUZSRVNIX1RPS0VOO1xuXG5jb25zdCBiYXNpYyA9IEJ1ZmZlci5mcm9tKGAke2NsaWVudF9pZH06JHtjbGllbnRfc2VjcmV0fWApLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuY29uc3QgVE9LRU5fRU5EUE9JTlQgPSBgaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW5gO1xuXG5jb25zdCBnZXRBY2Nlc3NUb2tlbiA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChUT0tFTl9FTkRQT0lOVCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7YmFzaWN9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG4gICAgfSxcbiAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgIGdyYW50X3R5cGU6IFwicmVmcmVzaF90b2tlblwiLFxuICAgICAgcmVmcmVzaF90b2tlbixcbiAgICB9KS50b1N0cmluZygpLFxuICB9KTtcblxuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufTtcblxuY29uc3QgTk9XX1BMQVlJTkdfRU5EUE9JTlQgPSBgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvbWUvcGxheWVyL2N1cnJlbnRseS1wbGF5aW5nYDtcblxuZXhwb3J0IGNvbnN0IGdldE5vd1BsYXlpbmcgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHsgYWNjZXNzX3Rva2VuIH0gPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbigpO1xuXG4gIHJldHVybiBmZXRjaChOT1dfUExBWUlOR19FTkRQT0lOVCwge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NfdG9rZW59YCxcbiAgICB9LFxuICB9KTtcbn07XG5cbmNvbnN0IFRPUF9UUkFDS1NfRU5EUE9JTlQgPSBgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvbWUvdG9wL3RyYWNrc2A7XG5cbmV4cG9ydCBjb25zdCBnZXRUb3BUcmFja3MgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHsgYWNjZXNzX3Rva2VuIH0gPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbigpO1xuXG4gIHJldHVybiBmZXRjaChUT1BfVFJBQ0tTX0VORFBPSU5ULCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc190b2tlbn1gLFxuICAgIH0sXG4gIH0pO1xufTtcblxuY29uc3QgUkVDRU5UTFlfUExBWUVEX0VORFBPSU5UID0gYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL21lL3BsYXllci9yZWNlbnRseS1wbGF5ZWRgO1xuXG5leHBvcnQgY29uc3QgZ2V0UmVjZW50VHJhY2tzID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7IGFjY2Vzc190b2tlbiB9ID0gYXdhaXQgZ2V0QWNjZXNzVG9rZW4oKTtcblxuICByZXR1cm4gZmV0Y2goUkVDRU5UTFlfUExBWUVEX0VORFBPSU5ULCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc190b2tlbn1gLFxuICAgIH0sXG4gIH0pO1xufTsiXSwibmFtZXMiOlsiY2xpZW50X2lkIiwicHJvY2VzcyIsImVudiIsIlNQT1RJRllfQ0xJRU5UX0lEIiwiY2xpZW50X3NlY3JldCIsIlNQT1RJRllfQ0xJRU5UX1NFQ1JFVCIsInJlZnJlc2hfdG9rZW4iLCJTUE9USUZZX1JFRlJFU0hfVE9LRU4iLCJiYXNpYyIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIlRPS0VOX0VORFBPSU5UIiwiZ2V0QWNjZXNzVG9rZW4iLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJib2R5IiwiVVJMU2VhcmNoUGFyYW1zIiwiZ3JhbnRfdHlwZSIsImpzb24iLCJOT1dfUExBWUlOR19FTkRQT0lOVCIsImdldE5vd1BsYXlpbmciLCJhY2Nlc3NfdG9rZW4iLCJUT1BfVFJBQ0tTX0VORFBPSU5UIiwiZ2V0VG9wVHJhY2tzIiwiUkVDRU5UTFlfUExBWUVEX0VORFBPSU5UIiwiZ2V0UmVjZW50VHJhY2tzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/spotify.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/now-playing.js":
/*!**************************************!*\
  !*** ./src/pages/api/now-playing.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_spotify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/spotify */ \"(api)/./src/lib/spotify.js\");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (_, res)=>{\n    const response = await (0,_lib_spotify__WEBPACK_IMPORTED_MODULE_0__.getRecentTracks)();\n    if (response.status === 204 || response.status > 400) {\n        return res.status(200).json({\n            isPlaying: false\n        });\n    }\n    const songs = await response.json();\n    if (songs.item === null) {\n        return res.status(200).json({\n            isPlaying: false\n        });\n    }\n    const mostRecentSong = songs.items[0];\n    const isPlaying = mostRecentSong.is_playing;\n    const title = mostRecentSong.track.name;\n    const artist = mostRecentSong.track.artists.map((_artist)=>_artist.name\n    ).shift();\n    const songUrl = mostRecentSong.track.external_urls.spotify;\n    res.setHeader(\"Cache-Control\", \"public, s-maxage=60, stale-while-revalidate=30\");\n    return res.status(200).json({\n        isPlaying,\n        title,\n        artist,\n        songUrl\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL25vdy1wbGF5aW5nLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStDO0FBRS9DLGlFQUFNLE9BQWdCQyxDQUFDLEVBQUVDLEdBQUcsR0FBSyxDQUFDO0lBQzlCLEtBQUssQ0FBQ0MsUUFBUSxHQUFHLEtBQUssQ0FBQ0gsNkRBQWU7SUFFdEMsRUFBRSxFQUFFRyxRQUFRLENBQUNDLE1BQU0sS0FBSyxHQUFHLElBQUlELFFBQVEsQ0FBQ0MsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDO1FBQ3JELE1BQU0sQ0FBQ0YsR0FBRyxDQUFDRSxNQUFNLENBQUMsR0FBRyxFQUFFQyxJQUFJLENBQUMsQ0FBQztZQUFDQyxTQUFTLEVBQUUsS0FBSztRQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVELEtBQUssQ0FBQ0MsS0FBSyxHQUFHLEtBQUssQ0FBQ0osUUFBUSxDQUFDRSxJQUFJO0lBRWpDLEVBQUUsRUFBRUUsS0FBSyxDQUFDQyxJQUFJLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDeEIsTUFBTSxDQUFDTixHQUFHLENBQUNFLE1BQU0sQ0FBQyxHQUFHLEVBQUVDLElBQUksQ0FBQyxDQUFDO1lBQUNDLFNBQVMsRUFBRSxLQUFLO1FBQUMsQ0FBQztJQUNsRCxDQUFDO0lBR0QsS0FBSyxDQUFDRyxjQUFjLEdBQUdGLEtBQUssQ0FBQ0csS0FBSyxDQUFDLENBQUM7SUFDcEMsS0FBSyxDQUFDSixTQUFTLEdBQUdHLGNBQWMsQ0FBQ0UsVUFBVTtJQUMzQyxLQUFLLENBQUNDLEtBQUssR0FBR0gsY0FBYyxDQUFDSSxLQUFLLENBQUNDLElBQUk7SUFDdkMsS0FBSyxDQUFDQyxNQUFNLEdBQUdOLGNBQWMsQ0FBQ0ksS0FBSyxDQUFDRyxPQUFPLENBQUNDLEdBQUcsRUFBRUMsT0FBTyxHQUFLQSxPQUFPLENBQUNKLElBQUk7TUFBRUssS0FBSztJQUNoRixLQUFLLENBQUNDLE9BQU8sR0FBR1gsY0FBYyxDQUFDSSxLQUFLLENBQUNRLGFBQWEsQ0FBQ0MsT0FBTztJQUcxRHBCLEdBQUcsQ0FBQ3FCLFNBQVMsQ0FDWCxDQUFlLGdCQUNmLENBQWdEO0lBR3BELE1BQU0sQ0FBQ3JCLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLEdBQUcsRUFBRUMsSUFBSSxDQUFDLENBQUM7UUFBQ0MsU0FBUztRQUFFTSxLQUFLO1FBQUVHLE1BQU07UUFBRUssT0FBTztJQUFDLENBQUM7QUFDbkUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21pdHVsLmNhLy4vc3JjL3BhZ2VzL2FwaS9ub3ctcGxheWluZy5qcz8xOTc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFJlY2VudFRyYWNrcyB9IGZyb20gXCJAL2xpYi9zcG90aWZ5XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChfLCByZXMpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFJlY2VudFRyYWNrcygpO1xuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0IHx8IHJlc3BvbnNlLnN0YXR1cyA+IDQwMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaXNQbGF5aW5nOiBmYWxzZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzb25ncyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGlmIChzb25ncy5pdGVtID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBpc1BsYXlpbmc6IGZhbHNlIH0pO1xuICAgIH1cblxuICAgIFxuICAgIGNvbnN0IG1vc3RSZWNlbnRTb25nID0gc29uZ3MuaXRlbXNbMF07XG4gICAgY29uc3QgaXNQbGF5aW5nID0gbW9zdFJlY2VudFNvbmcuaXNfcGxheWluZztcbiAgICBjb25zdCB0aXRsZSA9IG1vc3RSZWNlbnRTb25nLnRyYWNrLm5hbWU7XG4gICAgY29uc3QgYXJ0aXN0ID0gbW9zdFJlY2VudFNvbmcudHJhY2suYXJ0aXN0cy5tYXAoKF9hcnRpc3QpID0+IF9hcnRpc3QubmFtZSkuc2hpZnQoKTtcbiAgICBjb25zdCBzb25nVXJsID0gbW9zdFJlY2VudFNvbmcudHJhY2suZXh0ZXJuYWxfdXJscy5zcG90aWZ5O1xuXG5cbiAgICByZXMuc2V0SGVhZGVyKFxuICAgICAgXCJDYWNoZS1Db250cm9sXCIsXG4gICAgICBcInB1YmxpYywgcy1tYXhhZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9MzBcIlxuICAgICk7XG5cbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaXNQbGF5aW5nLCB0aXRsZSwgYXJ0aXN0LCBzb25nVXJsIH0pO1xufTtcbiJdLCJuYW1lcyI6WyJnZXRSZWNlbnRUcmFja3MiLCJfIiwicmVzIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJqc29uIiwiaXNQbGF5aW5nIiwic29uZ3MiLCJpdGVtIiwibW9zdFJlY2VudFNvbmciLCJpdGVtcyIsImlzX3BsYXlpbmciLCJ0aXRsZSIsInRyYWNrIiwibmFtZSIsImFydGlzdCIsImFydGlzdHMiLCJtYXAiLCJfYXJ0aXN0Iiwic2hpZnQiLCJzb25nVXJsIiwiZXh0ZXJuYWxfdXJscyIsInNwb3RpZnkiLCJzZXRIZWFkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/now-playing.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/now-playing.js"));
module.exports = __webpack_exports__;

})();